<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalhes do Produto - {{ product.title }}</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
    <div class="container-fluid mt-4">
        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/ml/products">Produtos ML</a></li>
                <li class="breadcrumb-item active" aria-current="page">Detalhes do Produto</li>
            </ol>
        </nav>

        <!-- Header do Produto -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-start">
                    <div>
                        <h1 class="h3 mb-2">{{ product.title }}</h1>
                        <p class="text-muted mb-3">{{ product.subtitle }}</p>
                        <div class="d-flex gap-2 mb-3">
                            <span class="badge bg-success">{{ product.status }}</span>
                            <span class="badge bg-info">Catálogo</span>
                            <span class="badge bg-secondary">Frete Grátis</span>
                        </div>
                    </div>
                    <div class="d-flex gap-2">
                        <a href="{{ product.permalink }}" target="_blank" class="btn btn-primary">
                            <i class="bi bi-box-arrow-up-right"></i> Ver no Mercado Livre
                        </a>
                        <a href="/ml/products" class="btn btn-outline-secondary">
                            <i class="bi bi-arrow-left"></i> Voltar
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- Coluna Esquerda - Imagens -->
            <div class="col-lg-4 mb-4">
                <div class="card">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-images"></i> Imagens do Produto</h6>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <img src="{{ product.thumbnail }}" class="img-fluid rounded" alt="{{ product.title }}">
                        </div>
                        
                        <div class="row">
                            <div class="col-12 mb-2">
                                <p class="text-muted">Imagens adicionais disponíveis no Mercado Livre</p>
                                <a href="{{ product.permalink }}" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="bi bi-box-arrow-up-right"></i> Ver todas as imagens
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coluna Direita - Informações -->
            <div class="col-lg-8">
                <!-- Informações Básicas -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-info-circle"></i> Informações Básicas</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <strong>Preço:</strong> 
                                <span class="h5 text-primary">R$ {{ product.price }}</span>
                                <small class="text-muted">{{ product.currency_id }}</small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Estoque:</strong> 
                                <span class="badge bg-success">
                                    {{ product.available_quantity }} unidades
                                </span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Vendidos:</strong> {{ product.sold_quantity }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Condição:</strong> {{ product.condition }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Tipo de Listagem:</strong> 
                                <span class="badge bg-warning">{{ product.listing_type_id }}</span>
                                <small class="text-muted d-block">
                                    <span id="listing-description">{{ product.listing_type_id }}</span>
                                </small>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Modo de Compra:</strong> 
                                <span class="badge bg-info">{{ product.buying_mode }}</span>
                                <small class="text-muted d-block">Comprar Agora (sem leilão)</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Informações de Categoria -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-tags"></i> Categoria</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <strong>ID da Categoria:</strong> {{ product.category_id }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Nome:</strong> 
                                <span class="text-muted">Placas de Microcontroladores</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Informações de Envio -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-truck"></i> Informações de Envio</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <strong>Tipo de Envio:</strong> 
                                <span class="badge bg-info">{{ product.shipping.shipping_type }}</span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Logistic Type:</strong> {{ product.shipping.logistic_type }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Frete Grátis:</strong> 
                                <span class="badge bg-secondary">
                                    Não
                                </span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Retirada Local:</strong> 
                                <span class="badge bg-secondary">
                                    Não
                                </span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Informações de Catálogo -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-book"></i> Informações de Catálogo</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <strong>É de Catálogo:</strong> 
                                <span class="badge bg-info">Sim</span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>ID do Catálogo:</strong> {{ product.catalog_product_id }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Atributos do Produto -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-list-ul"></i> Atributos do Produto</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 mb-3">
                                <p class="text-muted">Atributos detalhados disponíveis no Mercado Livre</p>
                                <a href="{{ product.permalink }}" target="_blank" class="btn btn-outline-primary btn-sm">
                                    <i class="bi bi-box-arrow-up-right"></i> Ver todos os atributos
                                </a>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Variações -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-collection"></i> Variações</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-12 mb-3">
                                <p class="text-muted">Este produto não possui variações.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Informações Técnicas -->
                <div class="card mb-4">
                    <div class="card-header">
                        <h6 class="mb-0"><i class="bi bi-gear"></i> Informações Técnicas</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <strong>ID do Produto:</strong> {{ product.ml_item_id }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>ID do Vendedor:</strong> {{ product.seller_id }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>SKU:</strong> {{ product.seller_sku }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Última Sincronização:</strong> {{ product.last_sync }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Criado em:</strong> {{ product.created_at }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Atualizado em:</strong> {{ product.updated_at }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>User Product ID:</strong> {{ product.user_product_id }}
                            </div>
                            <div class="col-md-6 mb-3">
                                <strong>Family ID:</strong> {{ product.family_id }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
    // Função para definir descrição dinâmica do tipo de listagem
    function setListingDescription() {
        const listingType = '{{ product.listing_type_id }}';
        const descriptionElement = document.getElementById('listing-description');
        
        const descriptions = {
            'gold_special': 'Anúncio Premium (Gold Special)',
            'gold_pro': 'Anúncio Gold Pro',
            'gold': 'Anúncio Gold',
            'silver': 'Anúncio Silver',
            'bronze': 'Anúncio Bronze',
            'free': 'Anúncio Gratuito',
            'classified': 'Classificado',
            'auction': 'Leilão'
        };
        
        const description = descriptions[listingType] || listingType;
        descriptionElement.textContent = description;
    }
    
    // Executar quando a página carregar
    document.addEventListener('DOMContentLoaded', setListingDescription);
    </script>
</body>
</html>
